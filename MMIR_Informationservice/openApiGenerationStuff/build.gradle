plugins {
    id 'java'
    id "org.openapi.generator" version "6.6.0"
}

group = 'de.tei'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation platform('org.junit:junit-bom:5.9.1')
    testImplementation 'org.junit.jupiter:junit-jupiter'
}

openApiGenerate {
    generatorName = "java"
    inputSpec = "$rootDir/api-gen/gmaf-openapi-spec2.json".toString()
    outputDir = "$buildDir/api-client-generated".toString()
    apiPackage = "de.tei.mmir.gmaf.api"
    invokerPackage = "de.tei.mmir.gmaf.invoker"
    modelPackage = "de.tei.mmir.gmaf.model"
    groupId = 'de.tei.mmir'
    id = 'gmaf-client'
    skipValidateSpec = true
    logToStderr = true
    generateAliasAsModel = false
    enablePostProcessFile = false
}

test {
    useJUnitPlatform()
}

compileJava.dependsOn tasks.openApiGenerate
